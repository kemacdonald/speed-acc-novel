---
title: "Speed-Acc-Novel Shifts Analysis"
output: html_document
---

## Set up

```{r chunk_options, echo = F}
# set some global options
knitr::opts_chunk$set(warning=F, message=F, sanitize = T, 
                      fig.height=4, fig.width=8, echo=T, cache = F)
```

```{r}
library(here)
library(tidyverse)
# source(here::here("code/helper_functions/libraries_and_functions.R"))
data_path <- "data/03_processed_data/"
theme_set(ggthemes::theme_base())
```

## Load data

```{r}
d <- read_csv(here::here(data_path, "speed_acc_novel_shifts.csv")) 
View(d)
```

## Check the data

Some questions we'd like to know about our data:

  * how many participants total? 
  * how many adults vs. kids? boys vs. girls:
  * how many participants in each age group?
  * how many participants were in the pilot, drop, or keep categories?
  * how many trials from each participant? for each word? for each gaze type?

We can answer these questions using tidyverse to generate tables. For example, the following code uses the `count()` function to tell us how many rows (i.e., trials) each particpant has in the dataset. `kable()` is a function for making the tables prettier if we were to knit this document to an html file for viewing on a browser.

## Participant number and number trials
```{r}
d %>% 
  count(subid) %>% 
  kable()
```

## Participant number
```{r}
d$subid %>%
  unique %>%
  length
```

## Group by demographics
d_by_subject <- d %>%
  group_by(subid, gender, ethnicity_race, order_key, keep_drop, age_years, age_group) %>%
  summarise
View(d_by_subject)

## Gender breakdown
```{r}
gender_by_subject <- d %>%
  group_by(subid, gender) %>%
  summarise
gender_by_subject # I think this can be taken out due to d_by_subject

d_by_subject %>%
  group_by(gender) %>%
  summarise(gender_number = n())
```

## Age group breakdown
```{r}
agegroup_by_subject <- d %>%
  group_by(subid, age_group) %>%
  summarise
agegroup_by_subject # I think this can be taken out due to d_by_subject

d_by_subject %>%
  group_by(age_group) %>%
  summarise(agegroup_number = n())
```

## Keep, drop, pilot
```{r}
# This code will NOT work until updated subject logs are read in
d_by_subject %>%
  group_by(keep_drop) %>%
  summarise(keepdrop_number = n())

d_by_subject %>%
  group_by(reason_excluded) %>%
  summarise(excluded_number = n())
```


## Trials
Here is some code that uses `group_by()` to tells us how many trials are in each condition. Note the use of `arrange()` to keep the table sorted by participant id.

```{r}
d %>% 
  group_by(gaze_condition) %>% 
  count(subid) %>% 
  arrange(subid) %>% 
  kable

```

## Filter data

Remove shifts that do not start at center. Remove participants based on keep_drop, and extreme RTs

## Remove shifts that don't start at center
```{r}
d_center_shifts <- d %>%
  filter(shift_start_location == "center")
View(d_center_shifts)
```



## Explore data using visualization

What does the distribution of age in the sample look like? 

```{r}

```

### Reaction Time 

What does the distribution of Reaction Times (RT) look like overall? How about across different gaze conditions?

```{r}

```

### Accuracy

What does first shift accuracy look like for different gaze conditions?

```{r}

```

What about as a function of trial number within each word learning block? (this plot should only include "test" trials without gaze)

```{r}

```


